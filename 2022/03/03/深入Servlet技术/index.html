<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>深入Servlet技术 | Vanilla's Blog</title><meta name="keywords" content="JAVA Web"><meta name="author" content="vanilla"><meta name="copyright" content="vanilla"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Servlet的概述什么是Servlet Servlet，全称Java Servlet。是用Java编写的服务器端程序。是用Java编写的服务器端程序。其主要功能在于交互式地浏览和修改数据，生成动态Web内容。狭义的Servlet是指Java语言实现的一个接口。广义的Servlet是指任何实现了这个Servlet接口的类。一般情况下，人们将Servlet理解为后者。 Servlet是JavaWeb">
<meta property="og:type" content="article">
<meta property="og:title" content="深入Servlet技术">
<meta property="og:url" content="http://example.com/2022/03/03/%E6%B7%B1%E5%85%A5Servlet%E6%8A%80%E6%9C%AF/index.html">
<meta property="og:site_name" content="Vanilla&#39;s Blog">
<meta property="og:description" content="Servlet的概述什么是Servlet Servlet，全称Java Servlet。是用Java编写的服务器端程序。是用Java编写的服务器端程序。其主要功能在于交互式地浏览和修改数据，生成动态Web内容。狭义的Servlet是指Java语言实现的一个接口。广义的Servlet是指任何实现了这个Servlet接口的类。一般情况下，人们将Servlet理解为后者。 Servlet是JavaWeb">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2022/03/03/XIW2SwyfT3PoBhR.png">
<meta property="article:published_time" content="2022-03-03T11:02:12.000Z">
<meta property="article:modified_time" content="2022-05-25T08:03:10.360Z">
<meta property="article:author" content="vanilla">
<meta property="article:tag" content="JAVA Web">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/03/03/XIW2SwyfT3PoBhR.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2022/03/03/%E6%B7%B1%E5%85%A5Servlet%E6%8A%80%E6%9C%AF/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '深入Servlet技术',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-05-25 16:03:10'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="Vanilla's Blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">74</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.zcool.cn%2Fcommunity%2F0389822590d681ba801214550b3e12a.jpg&amp;refer=http%3A%2F%2Fimg.zcool.cn&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=jpeg?sec=1648809656&amp;t=45d3426ae690348bdad2aa916ed5dc60')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Vanilla's Blog</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">深入Servlet技术</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-03T11:02:12.000Z" title="发表于 2022-03-03 19:02:12">2022-03-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-25T08:03:10.360Z" title="更新于 2022-05-25 16:03:10">2022-05-25</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="深入Servlet技术"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Servlet的概述"><a href="#Servlet的概述" class="headerlink" title="Servlet的概述"></a>Servlet的概述</h1><h2 id="什么是Servlet"><a href="#什么是Servlet" class="headerlink" title="什么是Servlet"></a>什么是Servlet</h2><ul>
<li>Servlet，全称Java Servlet。是用Java编写的服务器端程序。是用Java编写的服务器端程序。其主要功能在于交互式地浏览和修改数据，生成动态Web内容。<br>狭义的Servlet是指Java语言实现的一个接口。<br>广义的Servlet是指任何实现了这个Servlet接口的类。<br>一般情况下，人们将Servlet理解为后者。</li>
<li>Servlet是JavaWeb的核心程序，是Java Web的三大组件之一。（Servlet、Filter、Listener）</li>
</ul>
<h2 id="Servlet的作用"><a href="#Servlet的作用" class="headerlink" title="Servlet的作用"></a>Servlet的作用</h2><ul>
<li>用来处理客户端发送过来的请求，并对该请求做出响应<ul>
<li>获取接收客户端发送来的请求数据</li>
<li>处理请求</li>
<li>将处理的结果通过响应发送到客户端</li>
</ul>
</li>
</ul>
<p><img src="https://s2.loli.net/2022/03/08/7pkEBXDrlqOYjsQ.png" alt="avatar"></p>
<p>Servlet有多个</p>
<h2 id="Servlet的版本"><a href="#Servlet的版本" class="headerlink" title="Servlet的版本"></a>Servlet的版本</h2><p>Servlet3.0新特性：</p>
<ul>
<li>异步处理支持</li>
<li>可插性支持</li>
<li><strong>注释支持</strong> 该版本新增了若干注释，用于简化Servlet、过滤器和监听器的声明，这使得web.xml部署描述文件从该版本开始不再是必选的了。</li>
</ul>
<h1 id="编写第一个Servlet（3-0之前）"><a href="#编写第一个Servlet（3-0之前）" class="headerlink" title="编写第一个Servlet（3.0之前）"></a>编写第一个Servlet（3.0之前）</h1><h2 id="创建一个类继承HttpServlet（3-0之前）"><a href="#创建一个类继承HttpServlet（3-0之前）" class="headerlink" title="创建一个类继承HttpServlet（3.0之前）"></a>创建一个类继承HttpServlet（3.0之前）</h2><p>1.创建Servlet包<br>src—-&gt;new—-&gt;package<br>name:xxx.servlet<br>2.右键那个包，创建java class<br>3.继承httpservlet</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public class HelloServlet extends HttpServlet &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="复写HttpServlet中的doGet-、doPost"><a href="#复写HttpServlet中的doGet-、doPost" class="headerlink" title="复写HttpServlet中的doGet()、doPost()"></a>复写HttpServlet中的doGet()、doPost()</h2><ul>
<li>两种快捷方法<ul>
<li>直接输入doget&#x2F;dopost回车，自动补全代码，内容改成自己的</li>
<li>右键选择generate，也可以用快捷键alt+insert，选择方法<ul>
<li>override重写</li>
<li>delegate复写</li>
<li>constructor构造</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class HelloServlet extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        System.out.println(&quot;接收到get请求&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        System.out.println(&quot;接收到post请求&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="配置web-xml文件"><a href="#配置web-xml文件" class="headerlink" title="配置web.xml文件"></a>配置web.xml文件</h2><p>双击打开web.xml<br>补充代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span><br><span class="line">         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span><br><span class="line">         version=&quot;4.0&quot;&gt;</span><br><span class="line">    &lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;helloServlet&lt;/servlet-name&gt;&lt;!--Servlet名--&gt;</span><br><span class="line">        &lt;servlet-class&gt;vanilla.servlet.HelloServlet&lt;/servlet-class&gt;&lt;!--完整的类名--&gt;</span><br><span class="line">    &lt;/servlet&gt;&lt;!-- 注册servlet --&gt;</span><br><span class="line">    &lt;servlet-mapping&gt;&lt;!--映射--&gt;</span><br><span class="line">        &lt;servlet-name&gt;helloServlet&lt;/servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/hi&lt;/url-pattern&gt;&lt;!-- 访问的路径名 --&gt;</span><br><span class="line">    &lt;/servlet-mapping&gt;</span><br><span class="line">&lt;/web-app&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在右上角edit configuration——&gt;deployment<br>下面的Application context里修改端口名<br>在localhost:8080后面要加上刚刚改的端口名才能访问，默认就是加了端口名的<br>在浏览器网址后面再加上之前在web.xml中设置的url（&#x2F;hi）<br>在idea的输出窗口即可输出<br><img src="https://s2.loli.net/2022/03/03/9u6kCYe8i2pVMDG.png" alt="avatar"><br>说明Servlet访问成功！</p>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>url-pattern里面的前面必须有&#x2F;</p>
<h1 id="IDEA在Servlet3-0版本下创建Servlet（3-0之后，注解方式）"><a href="#IDEA在Servlet3-0版本下创建Servlet（3-0之后，注解方式）" class="headerlink" title="IDEA在Servlet3.0版本下创建Servlet（3.0之后，注解方式）"></a>IDEA在Servlet3.0版本下创建Servlet（3.0之后，注解方式）</h1><ul>
<li>创建项目的时候javaEE版本选择6.0以上</li>
<li>在IDEA的代码目录下直接右键new，选择Servlet</li>
<li>配置</li>
</ul>
<p>1.在创建好的包上右键new，选择servlet<br><img src="https://s2.loli.net/2022/03/03/8wLrcpvkOng4RAQ.png" alt="avatar"></p>
<h3 id="问题：new里面没有Servlet"><a href="#问题：new里面没有Servlet" class="headerlink" title="问题：new里面没有Servlet"></a>问题：new里面没有Servlet</h3><p>原因：创建的时候忘记勾web application了</p>
<h3 id="与之前创建方式的区别"><a href="#与之前创建方式的区别" class="headerlink" title="与之前创建方式的区别"></a>与之前创建方式的区别</h3><p>代码里多了一个注解：<br>@WebServlet(name &#x3D; “TestServlet”, value &#x3D; “&#x2F;TestServlet”)<br>直接帮我们完成了web.xml里面的配置，我们唯一要做的只有配置url<br>改成：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@WebServlet(name = &quot;TestServlet&quot;, urlPatterns = &quot;/test&quot;)</span><br></pre></td></tr></table></figure>
<p>就配置好了！</p>
<p>name是servlet的名字<br>value和urlPatterns是一个属性，即当前项目的路径</p>
<h1 id="HttpServletRequest简介"><a href="#HttpServletRequest简介" class="headerlink" title="HttpServletRequest简介"></a>HttpServletRequest简介</h1><p>在Servlet的API中，定义了一个HttpServletRequest接口，它继承自ServletRequest接口，它继承自ServletRequest接口，专门用于封装HTTP的请求，由于HTTP请求包含着请求行、请求头和请求体三部分，因此在HttpServletRequest中分别定义了接收请求行、请求头和请求体的相关方法。</p>
<blockquote class="pullquote mindmap mindmap-md"><ul>
<li>HttpServletRequest<ul>
<li>请求行</li>
<li>请求头</li>
<li>请求体</li>
</ul>
</li>
</ul>
</blockquote>

<h2 id="获取请求行相关方法"><a href="#获取请求行相关方法" class="headerlink" title="获取请求行相关方法"></a>获取请求行相关方法</h2><ul>
<li><strong>getMethod()：</strong>返回请求方法，请求方法通常是GET或者POST，但也可能是HEAD、PUT或者DELETE。</li>
<li><strong>getRequestURL()：</strong>返回URL（URL是URL的从主机和端口之后到表单数据之前的哪一部分）。</li>
</ul>
<p><em>localhost:8080&#x2F;hello&#x2F;get.html?name&#x3D;xiaohong&amp;passWord&#x3D;12345</em></p>
<ul>
<li><strong>getRemoteAddr()：</strong>该方法用于获取请求客户端的IP地址</li>
<li><strong>getRemoteport()：</strong>该方法用于获取请求客户端的端口号</li>
<li><strong>getLocalAddr()：</strong>该方法用于获取服务器当前接受请求的IP地址</li>
<li><strong>getContextPath()：</strong>该方法用于获取URL中属于web应用程序的路径</li>
<li><strong>getProtocol()：</strong>该方法用于获取请求行中的协议名和版本<br><img src="https://s2.loli.net/2022/03/06/NQCbYXKUkL3ytph.png" alt="avatar"></li>
</ul>
<h2 id="获取请求头的相关方法"><a href="#获取请求头的相关方法" class="headerlink" title="获取请求头的相关方法"></a>获取请求头的相关方法</h2><ul>
<li><strong>getHeader(String name)：</strong>该方法用于获取一个指定头字段的值，如果请求头中不包含该字段则返回null，如果包含多个该字段的值则获取第一个值</li>
<li><strong>getIntHeader(String name)：</strong>该方法用于获取指定头字段的值，并且将其值转为int类型，如果不存在该字段返回-1，如果获取到的值不能转换为int贼会发生NumberFormatException异常</li>
<li><strong>getDateHeaders(String name)：</strong>该方法用于获取指定头字段的值，并将其按照GMT时间格式转换成一个代表日期&#x2F;时间的长整数</li>
<li><strong>getHeaderNames(String name)：</strong>该方法用于获取所有包含请求头字段的Enumeration(枚举类型)</li>
</ul>
<p><em>ALT+Enter直接加入变量</em><br><img src="https://s2.loli.net/2022/03/06/NK3xB6Xbvt9aQYw.png" alt="avatar"></p>
<p>getHeader：<br><img src="https://s2.loli.net/2022/03/06/6PRd9NQJfCXU7zv.png" alt="avatar"></p>
<h2 id="获取请求参数"><a href="#获取请求参数" class="headerlink" title="获取请求参数"></a>获取请求参数</h2><ul>
<li><strong>★getParameter(String Name)：</strong>用于获取某个指定名称的参数值，如果请求中没有包含指定名称的参数，则返回null，如果有指定参数但是没有给设置值，则返回空串””，如果包含多个该参数的值则返回第一个出现的参数值。</li>
<li><strong>getParameterNames()：</strong>该方法用于返回一个包含请求消息中所有参数名的Enumernation</li>
<li><strong>getParameterMap()：</strong>该方法用于将请求中的所有参数和值装入一个map对象然后返回</li>
</ul>
<p>在web下创建一个html文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;发起HTTP get请求&lt;/h2&gt;</span><br><span class="line">&lt;form action=&quot;Test&quot; method=&quot;get&quot;&gt;</span><br><span class="line">    &lt;p&gt;账号：&lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;密码：&lt;input type=&quot;text&quot; name=&quot;passWord&quot; /&gt;&lt;/p&gt;</span><br><span class="line">    &lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p><em>注意：action要与WebServlet里设置的url名一致</em></p>
<p>在Servlet的doGet里添加获取参数方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String name=request.getParameter(&quot;name&quot;);</span><br><span class="line">        String passWord=request.getParameter(&quot;passWord&quot;);</span><br><span class="line">        System.out.println(&quot;用户名：&quot;+name);</span><br><span class="line">        System.out.println(&quot;密码：&quot;+passWord);</span><br></pre></td></tr></table></figure>
<p>运行，输入&#x2F;xxx.html<br>输入账号密码，点击提交<br>则可以获取参数<br><img src="https://s2.loli.net/2022/03/06/iEfToxmIJyA2ZwQ.png" alt="avatar"></p>
<p>如果不知道请求参数的名字可以用getParameterMap()获取</p>
<h1 id="HttpServletResponse"><a href="#HttpServletResponse" class="headerlink" title="HttpServletResponse"></a>HttpServletResponse</h1><p>在Servlet的API中，定义了一个HttpServletResponse接口，它继承自ServletResponse接口，专门用于封装HTTP的响应，由于HTTP响应包含着响应行、响应头和响应体三部分，因此在HttpServletResponse中分别<strong>定义</strong>了发送<strong>响应行、响应头和响应体的相关方法</strong></p>
<h2 id="Responsed对象发送响应行和响应头"><a href="#Responsed对象发送响应行和响应头" class="headerlink" title="Responsed对象发送响应行和响应头"></a>Responsed对象发送响应行和响应头</h2><ul>
<li><strong>setStatus(int status)：</strong>当Servlet向客户端回送响应消息时，需要设置一个状态码，该方法用于设置HTTP响应消息的状态码，并生成响应状态行。由于响应状态行中状态的描述直接和状态码相关，而HTTP协议版本由服务器决定，因此只需要设置该方法，就可以发送一个响应行，正常情况下，web服务器会默认发送一个200的状态码</li>
<li><strong>sendError(int code)：</strong>该方法用于发送表示错误信息的状态码，例如404找不到访问的资源，他还有一种重载的形式sendError(int code, String errorMessage),errorMessage可以以文本形式显示在客户端浏览器</li>
<li>区别：前者不会转页面，后者会跳转到错误提示页面</li>
<li>setStatus正确    sendError错误</li>
<li><strong>addHeader(String name, String value)：</strong>该方法用来设置HTTP协议的响应头字段，其中name是响应头字段名，value是相应字段的值</li>
<li><strong>setHeader(String name, String values)<strong>：该方法和addHeader相同，唯一的</strong>区别</strong>是addHeader可以重复添加一个同名的响应头字段，setHeader会覆盖之前添加的同名响应头</li>
<li><strong>addHeader(String name, int value)、setHeader(String name, int value)：</strong>这两个方法用于将value值为int的字段加入到响应头中</li>
<li><strong>setContentLength()<strong>：该方法用于设置HTTP响应消息的内容</strong>大小</strong>，单位是字节</li>
<li><strong>setContentType()<strong>：该方法用于设置Servlet输出内容的</strong>类型</strong>，也就是HTTP协议中的Content-Type响应头。例如发送到客户端的内容是jpeg格式的图像数据，就需要将响应头字段的类型设置为”image&#x2F;jpeg”,另外，如果相应的内容是文本，那这个时候setContentType还可以设置字符编码，例如text&#x2F;html:charset&#x3D;UTF-8</li>
<li>setCharacterEncoding(String charset)</li>
</ul>
<h2 id="HttpServletResponse发送响应体"><a href="#HttpServletResponse发送响应体" class="headerlink" title="HttpServletResponse发送响应体"></a>HttpServletResponse发送响应体</h2><p>由于在HTTP响应消息中，大量的数据都是通过响应体传递的，因此ServletResponse遵循以IO流传递大数据的设计理念，定义了两个与输出流相关的方法，具体如下：</p>
<ul>
<li><strong>getOutputStream：</strong>：该方法获取的字节流输出对象为ServletOutputStream类型，它是OutputStream的子类，因此可以直接输出字节数组中的二进制数据</li>
<li><strong>getWrite()：</strong>该方法获得的字符输出对象是PrintWriter类型，由于它可以直接输出文本类型，因此要输出网页文档，需要使用这个方法</li>
</ul>
<p>方法1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">String result=&quot;恭喜你登录成功&quot;;</span><br><span class="line">        ServletOutputStream outputStream = response.getOutputStream();</span><br><span class="line">        outputStream.write(result.getBytes());</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>点了提交后就会显示：恭喜你登陆成功</p>
<p>方法2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String result=&quot;恭喜你登录成功&quot;;</span><br><span class="line">        response.setContentType(&quot;text/html;charset=utf-8&quot;);//设置输出类型，否则可能出现乱码</span><br><span class="line">        PrintWriter writer = response.getWriter();</span><br><span class="line">        writer.write(result);</span><br></pre></td></tr></table></figure>

<h1 id="实现网站登录中验证码的切换功能"><a href="#实现网站登录中验证码的切换功能" class="headerlink" title="实现网站登录中验证码的切换功能"></a>实现网站登录中验证码的切换功能</h1><p>原理：<br>浏览器显示文档和图片，是由服务器回送给浏览器的响应完成的，而一个响应要封装成一个HttpServletResponse对象，所以我们只需要将验证码的图片封装到HttpServletResponse对象返回给浏览器即可。</p>
<ul>
<li>在web下新建一个html，待会要访问验证码的页面就是这个xxx.html</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;切换验证码&lt;/h2&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    function changeImageCode()&#123;</span><br><span class="line">        document.getElementById(&#x27;btn&#x27;).isDisabled=true;</span><br><span class="line">        document.getElementById(&#x27;identity&#x27;).src=&#x27;code?td=&#x27;+new Date().getTime();&lt;!--每个时间都不同，验证码不会重复--&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;image src=&quot;code&quot; id=&quot;identity&quot; ondload=&quot;btn.disable=false;&quot; style=&quot;cursor:pointer; vertical-align: middle&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/image&gt;</span><br><span class="line">&lt;input type=&quot;button&quot; value=&quot;看不清，更换验证码&quot; onclick=&quot;changeImageCode()&quot; id=&quot;btn&quot; style=&quot;vertical-align: middle&quot;&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>1.image标签用于显示验证码图片，src里面是我们要访问的servlet映射，当浏览器访问这个页面时，就会通过它访问到要显示的图片<br>2.input里面的button是点击更换验证码的按钮，onclick&#x3D;”changeImageCode()”，点击时就会执行changeImageCode()这个方法<br>这个方法定义在上面js中，后面加了时间的值是为了防止浏览器缓存，当每个时间都不同，浏览器就不会调用缓存，这样每次点击的验证码就会不同</p>
<ul>
<li>在class下新建一个Servlet</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">package vanilla;</span><br><span class="line"></span><br><span class="line">import javax.imageio.ImageIO;</span><br><span class="line">import javax.servlet.*;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">import javax.servlet.annotation.*;</span><br><span class="line">import java.awt.*;</span><br><span class="line">import java.awt.image.BufferedImage;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.util.Random;</span><br><span class="line"></span><br><span class="line">@WebServlet(name = &quot;VerifyCodeServlet&quot;, urlPatterns = &quot;/code&quot;)</span><br><span class="line">public class VerifyCodeServlet extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        int width=100;</span><br><span class="line">        int height=30;</span><br><span class="line"></span><br><span class="line">        String data=&quot;abcdefghijklmnopqrstuvwxyz0123456789&quot;;//定义一个字符串，验证码在这个字符串里面随机取</span><br><span class="line">        Random random=new Random();</span><br><span class="line"></span><br><span class="line">        BufferedImage image=new BufferedImage(width,height,BufferedImage.TYPE_INT_RGB);</span><br><span class="line">        Graphics graphics = image.getGraphics();</span><br><span class="line">        //绘制灰色到矩形</span><br><span class="line">        graphics.setColor(Color.gray);//设置颜色</span><br><span class="line">        graphics.fillRect(0,0,width,height);//绘制的起始坐标点</span><br><span class="line"></span><br><span class="line">        graphics.setColor(Color.black);</span><br><span class="line">        for(int i=0;i&lt;4;i++)&#123;</span><br><span class="line"></span><br><span class="line">            int position = random.nextInt(data.length());//随机取0~data.length()的值</span><br><span class="line">            String randomStr = data.substring(position, position + 1);//取出刚刚随机下标对应的字符</span><br><span class="line">            graphics.drawString(randomStr,width/5*(i+1),15);//绘制的字符以及其位置坐标，用i循环，使它的横坐标移动</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ImageIO.write(image,&quot;jpg&quot;,response.getOutputStream());//图片转换成outstream类型,第二个参数是类型，第三个参数是格式化输出流</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>BufferedImage image&#x3D;new BufferedImage(width,height,BufferedImage.TYPE_INT_RGB);<br>生成一个验证码图片，参数是图片的宽高(int)，最后一个参数是图片的类型</li>
</ol>
<p>2.ImageIO.write(image,”jpg”,response.getOutputStream());<br>将图片生成到网页，第一个参数是BufferedImage类的变量名，即要输出图片的变量名，第二个参数是图片类型，第三个参数是将图片格式化到输出流返回给浏览器<br>3.Graphics graphics &#x3D; image.getGraphics();<br>创建一个Graphics类，将变量image获取给它</p>
<h2 id="TIP"><a href="#TIP" class="headerlink" title="TIP"></a>TIP</h2><ul>
<li>如果new里面没有Servlet<br>在左上角的file——&gt;Project Structure——&gt;Facets里勾上下面的Source Root</li>
<li>访问的地址是&#x2F;xxx.html而不是servlet的url</li>
</ul>
<h1 id="Servlet的生命周期"><a href="#Servlet的生命周期" class="headerlink" title="Servlet的生命周期"></a>Servlet的生命周期</h1><p>Servlet从创建到销毁的过程</p>
<h2 id="Servlet接口"><a href="#Servlet接口" class="headerlink" title="Servlet接口"></a>Servlet接口</h2><p>包括三个方法：<br><img src="https://s2.loli.net/2022/03/08/RyIqexEJQhXAHpm.png" alt="avatar"></p>
<ul>
<li><strong>init(ServletConfig)方法：</strong> 初始化方法，ServletConfig包含一些Servlet基本配置信息</li>
<li><strong>service(ServletRequest, ServletResponse)方法：</strong> 每次访问都会调用来处理请求</li>
<li><strong>destory()方法：</strong> 销毁servlet方法</li>
</ul>
<h2 id="HttpServlet接口：javax-servlet-http"><a href="#HttpServlet接口：javax-servlet-http" class="headerlink" title="HttpServlet接口：javax.servlet.http"></a>HttpServlet接口：javax.servlet.http</h2><p>继承自Servleet接口，并重新实现了service方法，根据不同请求方式调用不同的处理方法。<br>service(HttpServletRequest, HttpServletResponse)方法，获取请求方式分别调用doGet(),或者doPost()方法。</p>
<ul>
<li>Setvlet接口下的service方法并不会调用doGet或者doPost处理请求而HttpServlet下的service方法会调用doGet或者doPost方法处理请求<br><img src="https://s2.loli.net/2022/03/08/6Xcjoem7UQIs3id.png" alt="avatar">、</li>
</ul>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package servlet;</span><br><span class="line"></span><br><span class="line">import javax.servlet.*;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">import javax.servlet.annotation.*;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">@WebServlet(name = &quot;LifeServlet&quot;, value = &quot;/Life&quot;)</span><br><span class="line">public class LifeServlet extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void init() throws ServletException &#123;</span><br><span class="line">        System.out.println(&quot;init 被执行了&quot;);</span><br><span class="line">        super.init();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        System.out.println(&quot;service 被执行了&quot;);</span><br><span class="line">        super.service(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        System.out.println(&quot;doget 被执行了&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        System.out.println(&quot;dopost 被执行了&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void destroy() &#123;</span><br><span class="line">        System.out.println(&quot;destroy 被执行了&quot;);</span><br><span class="line">        super.destroy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>第一次打开页面有init，第二次打开&#x2F;刷新没有init<br><img src="https://s2.loli.net/2022/03/08/MqewHbLo56XAGgK.png" alt="avatar"><br>关闭服务器<br><img src="https://s2.loli.net/2022/03/08/eEOoUHDi95ljL3p.png" alt="avatar"></p>
<h3 id="注意-1"><a href="#注意-1" class="headerlink" title="注意"></a>注意</h3><p>Servlet实例是单例的，即无论请求多少次Servlet，最多只有一个Servlet实例，如果是多个客户端并发，同时访问Servlet的时候，服务器会启动多个线程分别执行Servlet的service方法<br>原因：如果我们每次访问都创建一个Servlet实例，会占用和浪费过多的计算机资源</p>
<h1 id="ServletConfig对象"><a href="#ServletConfig对象" class="headerlink" title="ServletConfig对象"></a>ServletConfig对象</h1><p>ServletConfig对象是它所对应的Servlet对象的相关配置信息</p>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ul>
<li>每一个servlet对象都有一个ServletConfig对象和它相对应</li>
<li>ServletConfig对象在多个Servlet对象之间是不能共享的</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;helloServlet&lt;/servlet-name&gt;&lt;!--Servlet名--&gt;</span><br><span class="line">        &lt;servlet-class&gt;vanilla.servlet.HelloServlet&lt;/servlet-class&gt;&lt;!--完整的类名--&gt;</span><br><span class="line">        &lt;init-param&gt;&lt;!--初始化参数--&gt;</span><br><span class="line">            &lt;param-name&gt;encoding&lt;/param-name&gt;&lt;!--编码格式--&gt;</span><br><span class="line">            &lt;param-value&gt;utf-8&lt;/param-value&gt;&lt;!--编码格式--&gt;</span><br><span class="line">        &lt;/init-param&gt;</span><br><span class="line">    &lt;/servlet&gt;&lt;!-- 注册servlet --&gt;</span><br></pre></td></tr></table></figure>

<p>之前在web.xml中的就是这些相关配置信息</p>
<h2 id="常见的ServletConfig对象的方法："><a href="#常见的ServletConfig对象的方法：" class="headerlink" title="常见的ServletConfig对象的方法："></a>常见的ServletConfig对象的方法：</h2><ol>
<li>getInitParameter(String name)    返回一个初始化变量的值</li>
<li>getInitmeterNames()     返回servlet初始化参数的所有名称<br>上述的init-param标签可以有多个</li>
<li>getServletContext()    获取ServletContext对象</li>
<li>getServletName() 获取Servlet的name配置值</li>
</ol>
<h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public void init() throws ServletException &#123;</span><br><span class="line">        super.init();</span><br><span class="line">        ServletConfig servletConfig=this.getServletConfig();//获取ServletConfig对象</span><br><span class="line">        String encoding=servletConfig.getInitParameter(&quot;encoding&quot;);//获取初始化变量的值赋值给String对象</span><br><span class="line">        System.out.println(&quot;encoding=&quot;+encoding);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/03/08/NWtSoenZBEcP9Ff.png" alt="avatar"></p>
<h1 id="ServletContext-获取项目初始化参数"><a href="#ServletContext-获取项目初始化参数" class="headerlink" title="ServletContext-获取项目初始化参数"></a>ServletContext-获取项目初始化参数</h1><h2 id="ServletContext定义"><a href="#ServletContext定义" class="headerlink" title="ServletContext定义"></a>ServletContext定义</h2><p>ServletContext即Servlet上下文对象，该对象表示当前的web应用环境信息</p>
<h2 id="获取ServletContext对象"><a href="#获取ServletContext对象" class="headerlink" title="获取ServletContext对象"></a>获取ServletContext对象</h2><p>1.通过ServletConfig的getServletContext()方法可以得到ServletContext对象。<br>2.HttpServlet中直接通过this.getServletContext()获取</p>
<h2 id="域对象（域对象就是在不同资源之前来共享数据，保存数据，获取数据）"><a href="#域对象（域对象就是在不同资源之前来共享数据，保存数据，获取数据）" class="headerlink" title="域对象（域对象就是在不同资源之前来共享数据，保存数据，获取数据）"></a>域对象（域对象就是在不同资源之前来共享数据，保存数据，获取数据）</h2><p>ServletContext对象通常成为Context域对象。ServletContext是我们学习的第一个域对象</p>
<h3 id="测试-2"><a href="#测试-2" class="headerlink" title="测试"></a>测试</h3><p>在web.xml中输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;context-param&gt;</span><br><span class="line">    &lt;param-name&gt;encoding&lt;/param-name&gt;</span><br><span class="line">    &lt;param-value&gt;utf-8&lt;/param-value&gt;</span><br><span class="line">&lt;/context-param&gt;</span><br></pre></td></tr></table></figure>
<p>不同于之前的是，之前的初始化参数是写在servlet里面，这次写在全局变量，所有Servlet都可以直接获取<br>再新建一个Servlet</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        String encoding=this.getServletContext().getInitParameter(&quot;encoding&quot;);</span><br><span class="line">        System.out.println(encoding);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="获取所有初始化参数"><a href="#获取所有初始化参数" class="headerlink" title="获取所有初始化参数"></a>获取所有初始化参数</h4><p>1.在web.xml创建多个全局初始化变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;context-param&gt;</span><br><span class="line">        &lt;param-name&gt;encoding1&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;utf-8&lt;/param-value&gt;</span><br><span class="line">    &lt;/context-param&gt;</span><br><span class="line">    &lt;context-param&gt;</span><br><span class="line">        &lt;param-name&gt;encoding&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;utf-8&lt;/param-value&gt;</span><br><span class="line">    &lt;/context-param&gt;</span><br></pre></td></tr></table></figure>
<p>2.用getInitmeterNames()返回初始化参数名的枚举并打印</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Enumeration&lt;String&gt; encoding1 = this.getServletContext().getInitParameterNames();</span><br><span class="line">        while (encoding1.hasMoreElements()) &#123;</span><br><span class="line">            String string = encoding1.nextElement();</span><br><span class="line">            System.out.print(string+&quot; &quot;);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/03/08/d47e9IZDvuKYJaR.png" alt="avatar"></p>
<h1 id="ServletContext对象-在多个Servlet之间共享数据"><a href="#ServletContext对象-在多个Servlet之间共享数据" class="headerlink" title="ServletContext对象-在多个Servlet之间共享数据"></a>ServletContext对象-在多个Servlet之间共享数据</h1><p>三个方法：</p>
<ul>
<li>void setAttribute(String name, Object object);    存放数据</li>
<li>Object getAttribute(String name);                    获取数据</li>
<li>void removeAttribute(String name);                删除数据</li>
</ul>
<p>测试：</p>
<ul>
<li>在Test中存放数据<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        String data=&quot;xiaoming&quot;;</span><br><span class="line">         this.getServletContext().setAttribute(&quot;name&quot;,data);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li>在Test2中获取数据<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        String name = (String) this.getServletContext().getAttribute(&quot;name&quot;);</span><br><span class="line">        System.out.println(name);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
先访问Test页面，再访问Test2页面后，可以打印xiaoming</li>
</ul>
<p>两个方法前面都是getServletContext()，获取指定数据</p>
<h1 id="ServletContext"><a href="#ServletContext" class="headerlink" title="ServletContext"></a>ServletContext</h1><p>web中有两种配置文件：</p>
<ul>
<li>properties：<br>属性之间没有关联</li>
<li>xml：<br>有上下关系映射</li>
</ul>
<p>在db.properties中配置信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url=jdbc:mysql://localhost:3306</span><br><span class="line">name=name</span><br><span class="line">passWord=root</span><br></pre></td></tr></table></figure>

<p>新建一个Servlet，通过ServletContext读取项目的资源文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        InputStream resourceAsStream = this.getServletContext().getResourceAsStream(&quot;/db.properties&quot;);//读取文件路径，返回文件流</span><br><span class="line">        Properties properties =new Properties();</span><br><span class="line">        properties.load(resourceAsStream);//获取信息</span><br><span class="line">        String name = properties.getProperty(&quot;name&quot;);</span><br><span class="line">        String passW = properties.getProperty(&quot;passWord&quot;);</span><br><span class="line">        String url = properties.getProperty(&quot;url&quot;);</span><br><span class="line">        System.out.println(name+&quot; &quot;+passW+&quot; &quot;+url);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>由于我直接放在web目录下，所以参数直接是&#x2F;db.properties<br>如果db防止src下，应该写this.getServletContext().getResourceAsStream(“&#x2F;WEB-INF&#x2F;classes”);<br><strong>要看out里的路径</strong></p>
<h1 id="请求转发"><a href="#请求转发" class="headerlink" title="请求转发"></a>请求转发</h1><h2 id="Servlet之间的跳转"><a href="#Servlet之间的跳转" class="headerlink" title="Servlet之间的跳转"></a>Servlet之间的跳转</h2><p>Servlet之间可以实现跳转，从一个Servlet跳转到另一个Servlet，利用Servlet的跳转技术可以很方便的把一块业务模块分开，比如使用一个Servlet接收用户提交数据，使用另一个Servlet读取数据库，最后跳转到另一个Servlet把处理结果展示出来。这也就是<strong>MVC模式</strong>。</p>
<h2 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h2><p>用一种业务逻辑、数据、界面显示分离的方法组织代码，将业务逻辑聚集到一个部件里面，在改进和个性化定制界面及用户交互的同时，不需要重新编写业务逻辑。MVC被独特的发展起来用于映射传统的输入、处理和输出功能在一个逻辑的图形化用户界面的结构中。</p>
<h4 id="优点：方便维护，一个改变其他不会有影响"><a href="#优点：方便维护，一个改变其他不会有影响" class="headerlink" title="优点：方便维护，一个改变其他不会有影响"></a>优点：方便维护，一个改变其他不会有影响</h4><h2 id="转发Forward简介："><a href="#转发Forward简介：" class="headerlink" title="转发Forward简介："></a>转发Forward简介：</h2><p>在Servlet中如果当前的web资源不想处理请求时，可以通过forword方法将当前的请求传递给其他的web资源处理，这种方法称为请求转发。</p>
<p><img src="https://s2.loli.net/2022/03/09/lWu8Z4LYEDnRPSF.png" alt="avatar"></p>
<h3 id="TIP-1"><a href="#TIP-1" class="headerlink" title="TIP:"></a>TIP:</h3><p>在deployment里面才能改url，Server只是改默认访问的url</p>
<h1 id="登录错误时显示错误界面"><a href="#登录错误时显示错误界面" class="headerlink" title="登录错误时显示错误界面"></a>登录错误时显示错误界面</h1><h2 id="请求转发的相关方法"><a href="#请求转发的相关方法" class="headerlink" title="请求转发的相关方法"></a>请求转发的相关方法</h2><p>RequestDispatcher对象，可以通过request.getRequestDispatcher()方法获取调用这个对象的forward方法就可以实现请求转发。<br>request.getRequestDispatcher(转发界面的url).forward(要转发的参数)</p>
<p>Servlet代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        String userName=&quot;xiaoming&quot;;</span><br><span class="line">        String userPass=&quot;123456&quot;;</span><br><span class="line"></span><br><span class="line">        String name = request.getParameter(&quot;name&quot;);</span><br><span class="line">        String passWord = request.getParameter(&quot;passWord&quot;);</span><br><span class="line"></span><br><span class="line">        if(!userName.equals(name))&#123;</span><br><span class="line">            //账户不存在</span><br><span class="line">            request.setAttribute(&quot;errorMessage&quot;,&quot;账户不存在&quot;);</span><br><span class="line">            request.getRequestDispatcher(&quot;/loginError.jsp&quot;).forward(request,response);//转发到错误的界面loginError.jsp</span><br><span class="line">        &#125;else if(!userPass.equals(passWord))&#123;</span><br><span class="line">            //密码错误</span><br><span class="line">            request.setAttribute(&quot;errorMessage&quot;,&quot;密码错误&quot;);</span><br><span class="line">            request.getRequestDispatcher(&quot;/loginError.jsp&quot;).forward(request,response);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>jsp代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: vanilla</span><br><span class="line">  Date: 9/3/2022</span><br><span class="line">  Time: 上午9:23</span><br><span class="line">  To change this template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;$Title$&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;h2&gt;用户登录错误界面&lt;/h2&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;%=request.getAttribute(&quot;errorMessage&quot;)%&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>如果直接访问login页面，即Servlet页面，会500<br>原因是没有输入参数，equals前的指针为空指针</p>
<h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><p>将常量换在前面，需要用户输入的变量放在equals里面</p>
<h3 id="为什么不用ServletContext对象"><a href="#为什么不用ServletContext对象" class="headerlink" title="为什么不用ServletContext对象"></a>为什么不用ServletContext对象</h3><p>因为ServletContext对象是整个web项目共享的域对象，如果有并发访问，可能会传达错误信息</p>
<h3 id="转发过程中携带数据"><a href="#转发过程中携带数据" class="headerlink" title="转发过程中携带数据"></a>转发过程中携带数据</h3><p>request本身也是一个域对象，request可以携带数据传递给其他web资源<br>方法：<br>setAttribute<br>getAttribute<br>removeAttribute<br>getAttributeNames</p>
<h1 id="重定向介绍"><a href="#重定向介绍" class="headerlink" title="重定向介绍"></a>重定向介绍</h1><h2 id="重定向的简介"><a href="#重定向的简介" class="headerlink" title="重定向的简介"></a>重定向的简介</h2><p>重定向是根据服务器返回的状态码来实现的。客户端浏览器在请求服务器的时候，服务端会返回一个状态码。服务器通过HttpServletResponse的setStatus(int ststus)方法来设置状态码。如果服务器这个时候返回的状态码是301或者是302，则浏览器就会到新的网址重新请求该资源。服务器的响应中会带着这个新资源的地址。</p>
<p><img src="https://s2.loli.net/2022/03/09/9aDuPBVyJYWCzG1.png" alt="avatar"></p>
<h2 id="请求重定向相关代码"><a href="#请求重定向相关代码" class="headerlink" title="请求重定向相关代码"></a>请求重定向相关代码</h2><ul>
<li><p>设置状态码为302，SC_MOVED_TEMPORAILY就是302的静态常量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setStatus(HttpServletResponse.SC_MOVED_TEMPORAILY);</span><br></pre></td></tr></table></figure>
</li>
<li><p>在请求头中携带新的资源地址</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setHeader(&quot;Location&quot;,&quot;http://www.baidu.com&quot;);</span><br></pre></td></tr></table></figure></li>
</ul>
<p>为了使用方便，HttpServletResponse中将setStatus和setHeader这两种方法并到一起叫做sendRedirect(String location);</p>
<h3 id="问题-1"><a href="#问题-1" class="headerlink" title="问题"></a>问题</h3><p>如果sendRedirect(String location)参数直接是&#x2F;xxx.html，会404</p>
<p>原因：地址栏直接是<a target="_blank" rel="noopener" href="http://localhost:8080/home.html%EF%BC%8C%E8%80%8C%E6%B2%A1%E6%9C%89%E9%A1%B9%E7%9B%AE%E5%90%8D">http://localhost:8080/home.html，而没有项目名</a><br>所以参数应该是&#x2F;项目名&#x2F;home.html</p>
<h4 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h4><ul>
<li>请求转发：在服务器内部进行一个转发</li>
<li>请求重定向：是把地址发送给浏览器，浏览器会通过地址重新访问服务器</li>
</ul>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>在请求重定向时，内部地址要从项目名开始写完整的地址，外部地址则是完整的url地址</p>
<h1 id="重定向和转发的区别"><a href="#重定向和转发的区别" class="headerlink" title="重定向和转发的区别"></a>重定向和转发的区别</h1><p><img src="https://s2.loli.net/2022/03/09/BImGv4EUOtKrb1l.png" alt="avatar"><br>1.请求转发浏览器的网址不会变，请求重定向浏览器的网址会变<br>2.请求转发只有一个请求一个响应，请求重定向有两个请求两个响应<br>3.请求转发参数只需要内部资源吗，请求重定向访问内部资源还需要加项目名称</p>
<ul>
<li>如果要访问外部资源，只能使用请求重定向</li>
</ul>
<h1 id="网页自动刷新"><a href="#网页自动刷新" class="headerlink" title="网页自动刷新"></a>网页自动刷新</h1><p>Servlet代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        String message=&quot;&lt;meta http-equiv=&#x27;refresh&#x27; content=&#x27;3;url=/Login/home.html&#x27;&gt;3秒后会自动跳转到首页，如果没有跳转，请点击&lt;a href=&#x27;/Login/home.html&#x27;&gt;跳转链接&lt;/a&gt;&quot;;String里面用meta实现自动刷新，用a实现点击跳转</span><br><span class="line">        request.setAttribute(&quot;message&quot;,message);</span><br><span class="line">        request.getRequestDispatcher(&quot;/index.jsp&quot;).forward(request,response);//请求转发</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void RefreshDemol(HttpServletResponse response) throws IOException &#123;</span><br><span class="line">        response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br><span class="line">        response.setHeader(&quot;refresh&quot;,&quot;3;url=&#x27;/Login/home.html&#x27;&quot;);//类型，自动跳转时间，跳转地址</span><br><span class="line">        response.getWriter().print(&quot;3秒后自动刷新&quot;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>index.jsp代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%=request.getAttribute(&quot;message&quot;)%&gt;</span><br></pre></td></tr></table></figure>

<h2 id="解决乱码问题："><a href="#解决乱码问题：" class="headerlink" title="解决乱码问题："></a>解决乱码问题：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br></pre></td></tr></table></figure>
<p>设置类型</p>
<p>封装方法：<br>选取代码块–&gt;右键</p>
<h1 id="Servlet线程安全"><a href="#Servlet线程安全" class="headerlink" title="Servlet线程安全"></a>Servlet线程安全</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        i++;//第一次访问i已经是1，第二次访问=2</span><br><span class="line">        try&#123;</span><br><span class="line">            Thread.sleep(5*1000);</span><br><span class="line">        &#125;catch (InterruptedException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br><span class="line">        response.getWriter().write(i+&quot;&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="Servlet的线程安全相关"><a href="#Servlet的线程安全相关" class="headerlink" title="Servlet的线程安全相关"></a>Servlet的线程安全相关</h2><p>当多个客户端并发访问同一个Servlet的时候，web服务器会为每一个客户端的访问创建一个线程，并在这个线程上调用Servlet的service方法，因此service方法内部如果访问了同一个共享资源的话，就可能引发线程安全问题。<br>如果访问的是局部变量，就不会有线程安全问题。</p>
<h2 id="解决方法-1"><a href="#解决方法-1" class="headerlink" title="解决方法"></a>解决方法</h2><p>1.同步代码块<br>把代码放到synchronized (this){}中，可以阻塞同时的代码，只有第一个线程结束了，第二个才能访问</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">synchronized (this)&#123;</span><br><span class="line">            i++;//第一次访问i已经是1，第二次访问=2</span><br><span class="line">            try&#123;</span><br><span class="line">                Thread.sleep(5*1000);</span><br><span class="line">            &#125;catch (InterruptedException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br><span class="line">            response.getWriter().write(i+&quot;&quot;);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>缺点：等待时间长，用户体验差，不建议使用<br>2.实现SingleThreadModle接口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public class ThreadServlet extends HttpServlet implements SingleThreadModel</span><br></pre></td></tr></table></figure>
<p>这样这个Servlet就不在是一个单例的Servlet了，每一个客户端访问的时候都会创建一个Servlet实例<br>缺点：浪费计算机资源，不建议使用<br>3.尽量使用局部变量（最好）</p>
<h1 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h1><p>在web下创建一个文件夹，放置下载资源<br>response对象的两个输出方式：</p>
<ul>
<li>response.getWriter(); 输出字节码文件</li>
<li>response.getOutputStream(); 输出二进制文件</li>
</ul>
<p>所以要输出图片视频音乐，需要二进制这种形式、</p>
<h2 id="通过文件输入输出流将文件返回给客户端浏览器"><a href="#通过文件输入输出流将文件返回给客户端浏览器" class="headerlink" title="通过文件输入输出流将文件返回给客户端浏览器"></a>通过文件输入输出流将文件返回给客户端浏览器</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        //response.getWriter();</span><br><span class="line">        String filename = request.getParameter(&quot;filename&quot;);//获取文件名字</span><br><span class="line">        String realPath = this.getServletContext().getRealPath(&quot;download/&quot;+filename);//得到文件的绝对路径，注意：加上web下面文件夹的名称</span><br><span class="line">        InputStream in =new FileInputStream(realPath);//输入流，读取文件</span><br><span class="line">        ServletOutputStream outputStream = response.getOutputStream();</span><br><span class="line"></span><br><span class="line">        //文件拷贝</span><br><span class="line">        int len=0;</span><br><span class="line">        byte[] buffer=new byte[1024];//每次读取1024字节</span><br><span class="line">        while((len=in.read(buffer))&gt;0)&#123;</span><br><span class="line">            outputStream.write(buffer,0,len);</span><br><span class="line">        &#125;</span><br><span class="line">        in.close();//关闭输入流</span><br><span class="line">        outputStream.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>mp3，jpg，txt浏览器可以直接识别预览，其他会直接下载<br>原因：浏览器支持某些文件格式的解析</p>
<h2 id="通过对应的http响应头通知浏览器下载该文件"><a href="#通过对应的http响应头通知浏览器下载该文件" class="headerlink" title="通过对应的http响应头通知浏览器下载该文件"></a>通过对应的http响应头通知浏览器下载该文件</h2><ul>
<li>告知浏览器文件的类型：response.setContentType(文件的MIME类型);</li>
<li>告示浏览器文件的打开方式是下载：<br>response.setHeader(“Content-Disposition”,”attachment;filename&#x3D;文件名称”);<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//通知浏览器下载文件</span><br><span class="line">        String filename = request.getParameter(&quot;filename&quot;);//获取文件名字</span><br><span class="line">        String mimeType = this.getServletContext().getMimeType(filename);//得到文件mime类型</span><br><span class="line">        response.setContentType(mimeType);</span><br><span class="line">        response.setHeader(&quot;Content-Disposition&quot;,&quot;attachment;filename&quot;+filename);</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="综合案例"><a href="#综合案例" class="headerlink" title="综合案例"></a>综合案例</h1><h3 id="创建登录页、注册页"><a href="#创建登录页、注册页" class="headerlink" title="创建登录页、注册页"></a>创建登录页、注册页</h3><ul>
<li>jsp中的form里面的action对应Servlet，<strong>不要加&#x2F;</strong><br>method用post，用get表单内容会显示在url后面<br>name一定要写，表单向服务器提交的参数名称就是name的名称，这个参数前后台一致<br>id通常是前端的javaScript编程使用</li>
<li>input按钮<br>清空：reset<br>提交：submit<br>value按钮上显示的文字</li>
</ul>
<p>创建包：<br>1.右键src–&gt;new–&gt;package<br>再在包里创建servlet<br>2.直接在src右键创建servlet，填写包名称</p>
<h3 id="主页"><a href="#主页" class="headerlink" title="主页"></a>主页</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page import=&quot;vanilla.case1.entity.User&quot; %&gt;&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: vanilla</span><br><span class="line">  Date: 10/3/2022</span><br><span class="line">  Time: 下午6:02</span><br><span class="line">  To change this template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;首页&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;header&quot;&gt;</span><br><span class="line">    &lt;h1&gt;</span><br><span class="line">      个人网站</span><br><span class="line">    &lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      &lt;%</span><br><span class="line">        User user = (User)session.getAttribute(&quot;user&quot;);</span><br><span class="line">        if(user !=null)&#123;</span><br><span class="line">          response.setCharacterEncoding(&quot;utf-8&quot;);</span><br><span class="line">          out.print(&quot;欢迎你！&quot;+user.getUserName());</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">          %&gt;</span><br><span class="line">      &lt;a href=&quot;login.jsp&quot;&gt;登录&lt;/a&gt;</span><br><span class="line">      &lt;%</span><br><span class="line">        &#125;</span><br><span class="line">      %&gt;</span><br><span class="line">      &lt;a href=&quot;regist.jsp&quot;&gt;注册&lt;/a&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>两个超链接，转到login.jsp、regist.jsp</p>
<h3 id="LoginServlet"><a href="#LoginServlet" class="headerlink" title="LoginServlet"></a>LoginServlet</h3><p>1.获取用户名、密码<br>2.ServletContext去用户列表信息<br>3.遍历列表。验证是否有相同用户名、密码用户<br>4.有泽登陆成功，没有则登陆失败</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">package vanilla.case1.servlet;</span><br><span class="line"></span><br><span class="line">import vanilla.case1.entity.User;</span><br><span class="line"></span><br><span class="line">import javax.servlet.*;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">import javax.servlet.annotation.*;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.io.ObjectInputStream;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Properties;</span><br><span class="line"></span><br><span class="line">@WebServlet(name = &quot;LoginServlet&quot;, value = &quot;/login&quot;)</span><br><span class="line">public class LoginServlet extends HttpServlet &#123;</span><br><span class="line">    public void init() throws ServletException &#123;//初始化</span><br><span class="line">        super.init();</span><br><span class="line">        List&lt;User&gt; userList=(List&lt;User&gt;)this.getServletContext().getAttribute(&quot;userList&quot;);</span><br><span class="line">        if(userList==null)&#123;</span><br><span class="line">            //本地磁盘文件用户信息的加载</span><br><span class="line">            InputStream in = this.getServletContext().getResourceAsStream(&quot;/WEB-INF/classes/path.properties&quot;);//快速读取上下文件作为输入流</span><br><span class="line">            Properties properties=new Properties();</span><br><span class="line">            try&#123;</span><br><span class="line">                properties.load(in);</span><br><span class="line">                String path = (String)properties.get(&quot;path&quot;);</span><br><span class="line"></span><br><span class="line">                //开始读取本地存储用户信息</span><br><span class="line">                FileInputStream fis=new FileInputStream(path);</span><br><span class="line">                ObjectInputStream ois=new ObjectInputStream(fis);</span><br><span class="line"></span><br><span class="line">                List&lt;User&gt; userList1 = (List&lt;User&gt;)ois.readObject();</span><br><span class="line">                this.getServletContext().setAttribute(&quot;userList&quot;,userList1);</span><br><span class="line">                ois.close();</span><br><span class="line"></span><br><span class="line">            &#125;catch (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        String userName=request.getParameter(&quot;userName&quot;);</span><br><span class="line">        String password=request.getParameter(&quot;password&quot;);</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; userList = (List&lt;User&gt;)this.getServletContext().getAttribute(&quot;userList&quot;);//获取信息，赋值给列表</span><br><span class="line">        User loginUser=null;</span><br><span class="line">        boolean loginStatus=false;//判断有没有该用户</span><br><span class="line">        if(userList!=null)&#123;</span><br><span class="line">            for(User user:userList)&#123;//遍历</span><br><span class="line">                //验证是否存在相同用户名、密码用户</span><br><span class="line">                if(userName!=null&amp;&amp;password!=null&amp;&amp;userName.equals(user.getUserName())&amp;&amp;password.equals(user.getPassword()))</span><br><span class="line">                &#123;</span><br><span class="line">                    loginUser=user;</span><br><span class="line">                    loginStatus=true;</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if(loginStatus)&#123;</span><br><span class="line">            HttpSession session=request.getSession();//会话对象</span><br><span class="line">            session.setAttribute(&quot;user&quot;,loginUser);</span><br><span class="line">            response.sendRedirect(&quot;index.jsp&quot;);//请求重定向</span><br><span class="line">        &#125;</span><br><span class="line">        else&#123;</span><br><span class="line">            response.sendRedirect((&quot;login.jsp?error=user login fail!&quot;));//显示error</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="创建一个实体类来存储用户信息"><a href="#创建一个实体类来存储用户信息" class="headerlink" title="创建一个实体类来存储用户信息"></a>创建一个实体类来存储用户信息</h3><p>先定义所有变量<br>再右键Generate或者alt+Insert，选择getter and setter，按ctrl多选，为所有变量创建方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">package vanilla.case1.entity;</span><br><span class="line"></span><br><span class="line">import java.util.Date;</span><br><span class="line"></span><br><span class="line">public class User &#123;</span><br><span class="line">    private String userName;</span><br><span class="line">    private String password;</span><br><span class="line">    private String realName;</span><br><span class="line">    private String ID;</span><br><span class="line">    private Date birth;</span><br><span class="line"></span><br><span class="line">    public User(String userName, String password, String realName, String ID, Date birth) &#123;</span><br><span class="line">        this.userName = userName;</span><br><span class="line">        this.password = password;</span><br><span class="line">        this.realName = realName;</span><br><span class="line">        this.ID = ID;</span><br><span class="line">        this.birth = birth;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getUserName() &#123;</span><br><span class="line">        return userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUserName(String userName) &#123;</span><br><span class="line">        this.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getPassword() &#123;</span><br><span class="line">        return password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPassword(String password) &#123;</span><br><span class="line">        this.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getRealName() &#123;</span><br><span class="line">        return realName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setRealName(String realName) &#123;</span><br><span class="line">        this.realName = realName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getID() &#123;</span><br><span class="line">        return ID;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setID(String ID) &#123;</span><br><span class="line">        this.ID = ID;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Date getBirth() &#123;</span><br><span class="line">        return birth;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setBirth(Date birth) &#123;</span><br><span class="line">        this.birth = birth;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="RegistServlet"><a href="#RegistServlet" class="headerlink" title="RegistServlet"></a>RegistServlet</h3><p>1.获取用户注册信息<br>2.验证用户名跟用户列表是否有相同的<br>ServletContext获取用户列表<br>如果null，创建一个List添加到ServletContext<br>3.如果有相同的，返回regist.jsp<br>4.如果没有相同的，将用户信息存入用户列表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">package vanilla.case1.servlet;</span><br><span class="line"></span><br><span class="line">import vanilla.case1.entity.User;</span><br><span class="line"></span><br><span class="line">import javax.servlet.*;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">import javax.servlet.annotation.*;</span><br><span class="line">import java.io.*;</span><br><span class="line">import java.text.SimpleDateFormat;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Properties;</span><br><span class="line"></span><br><span class="line">@WebServlet(name = &quot;RegistServlet&quot;, value = &quot;/regist&quot;)</span><br><span class="line">public class RegistServlet extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void destroy()&#123;</span><br><span class="line">        super.destroy();</span><br><span class="line">        List&lt;User&gt; userList=(List&lt;User&gt;)this.getServletContext().getAttribute(&quot;userList&quot;);</span><br><span class="line">        if(userList!=null)&#123;</span><br><span class="line">            //本地磁盘文件用户信息的输出</span><br><span class="line">            InputStream in = this.getServletContext().getResourceAsStream(&quot;/WEB-INF/classes/path.properties&quot;);//快速读取上下文件作为输入流</span><br><span class="line">            Properties properties=new Properties();</span><br><span class="line">            try&#123;</span><br><span class="line">                properties.load(in);</span><br><span class="line">                String path = (String)properties.get(&quot;path&quot;);</span><br><span class="line"></span><br><span class="line">                //输出内存本地存储用户信息</span><br><span class="line">                ObjectOutputStream oos = new ObjectOutputStream((new FileOutputStream(&quot;path&quot;)));</span><br><span class="line">                oos.writeObject(userList);</span><br><span class="line">                oos.flush();</span><br><span class="line">                oos.close();</span><br><span class="line"></span><br><span class="line">            &#125;catch (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void init() throws ServletException &#123;//初始化</span><br><span class="line">        super.init();</span><br><span class="line">        List&lt;User&gt; userList=(List&lt;User&gt;)this.getServletContext().getAttribute(&quot;userList&quot;);</span><br><span class="line">        if(userList==null)&#123;</span><br><span class="line">            //本地磁盘文件用户信息的加载</span><br><span class="line">            InputStream in = this.getServletContext().getResourceAsStream(&quot;/WEB-INF/classes/path.properties&quot;);//快速读取上下文件作为输入流</span><br><span class="line">            Properties properties=new Properties();</span><br><span class="line">            try&#123;</span><br><span class="line">                properties.load(in);</span><br><span class="line">                String path = (String)properties.get(&quot;path&quot;);</span><br><span class="line"></span><br><span class="line">                //开始读取本地存储用户信息</span><br><span class="line">                FileInputStream fis=new FileInputStream(path);</span><br><span class="line">                ObjectInputStream ois=new ObjectInputStream(fis);</span><br><span class="line"></span><br><span class="line">                List&lt;User&gt; userList1 = (List&lt;User&gt;)ois.readObject();</span><br><span class="line">                this.getServletContext().setAttribute(&quot;userList&quot;,userList1);</span><br><span class="line">                ois.close();</span><br><span class="line"></span><br><span class="line">            &#125;catch (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        //获取用户注册信息</span><br><span class="line">        String userName=request.getParameter(&quot;userName&quot;);</span><br><span class="line">        String password=request.getParameter(&quot;password&quot;);</span><br><span class="line">        String ID=request.getParameter(&quot;ID&quot;);</span><br><span class="line">        String realName=request.getParameter(&quot;realName&quot;);</span><br><span class="line">        String birthStr=request.getParameter(&quot;birth&quot;);</span><br><span class="line"></span><br><span class="line">        //验证用户名在用户列表中是否存在相同</span><br><span class="line">        List&lt;User&gt; userList=(List&lt;User&gt;)this.getServletContext().getAttribute(&quot;userList&quot;);</span><br><span class="line">        if(userList==null)&#123;</span><br><span class="line">            userList=new ArrayList&lt;User&gt;();</span><br><span class="line">            this.getServletContext().setAttribute(&quot;userList&quot;,userList);</span><br><span class="line">        &#125;</span><br><span class="line">        boolean registStatus=true;</span><br><span class="line">        for(User user:userList)&#123;</span><br><span class="line">            if(userName!=null&amp;&amp;userName.equals(user.getUserName()))&#123;</span><br><span class="line">                registStatus=false;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if(registStatus)&#123;</span><br><span class="line">            //注册成功</span><br><span class="line">            SimpleDateFormat sdf=new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);//字符串转成日期，参数是日期格式</span><br><span class="line">            Date birthDate=null;</span><br><span class="line">            try&#123;</span><br><span class="line">                birthDate = sdf.parse(birthStr);//format方法是日期转字符串</span><br><span class="line">            &#125;catch(Exception e)&#123;</span><br><span class="line">                birthDate=new Date();</span><br><span class="line">            &#125;</span><br><span class="line">            User user=new User(userName,password,realName,ID,birthDate);</span><br><span class="line">            userList.add(user);</span><br><span class="line">            response.sendRedirect(&quot;login.jsp&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        else &#123;</span><br><span class="line">            RequestDispatcher rd=request.getRequestDispatcher(&quot;regist.jsp&quot;);</span><br><span class="line">            request.setAttribute(&quot;error&quot;,&quot;用户名已存在&quot;);</span><br><span class="line">            rd.forward(request,response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="会话"><a href="#会话" class="headerlink" title="会话"></a>会话</h3><p>在整个浏览器开启的过程一直有效，所以会一直保持登录状态<br>一般本地用户文件不能放在web下，不然会被访问的人得到</p>
<h3 id="login-jsp"><a href="#login-jsp" class="headerlink" title="login.jsp"></a>login.jsp</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: vanilla</span><br><span class="line">  Date: 10/3/2022</span><br><span class="line">  Time: 下午6:05</span><br><span class="line">  To change this template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;登录&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;用户登录&lt;/h1&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        String error = request.getParameter(&quot;error&quot;);</span><br><span class="line">        if(error!=null)&#123;</span><br><span class="line">            out.print(error);//response的输出流对象，表示在当前位置直接输出内容</span><br><span class="line">        &#125;</span><br><span class="line">    %&gt;</span><br><span class="line">    &lt;form action=&quot;login&quot; method=&quot;post&quot;&gt;</span><br><span class="line">        &lt;p&gt;&lt;label for=&quot;userName&quot;&gt;用户名:&lt;/label&gt;&lt;input type=&quot;text&quot; name=&quot;userName&quot; id=&quot;userName&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;label for=&quot;password&quot;&gt;密码:&lt;/label&gt;&lt;input type=&quot;password&quot; name=&quot;password&quot; id=&quot;password&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=&quot;reset&quot;  value=&quot;清空&quot;&gt;&lt;input type=&quot;submit&quot; value=&quot;登录&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="regist-jsp"><a href="#regist-jsp" class="headerlink" title="regist.jsp"></a>regist.jsp</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: vanilla</span><br><span class="line">  Date: 10/3/2022</span><br><span class="line">  Time: 下午6:05</span><br><span class="line">  To change this template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;注册&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;用户注册&lt;/h1&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        String error = (String)request.getAttribute(&quot;error&quot;);</span><br><span class="line">        if(error!=null)&#123;</span><br><span class="line">            out.print(error);</span><br><span class="line">        &#125;</span><br><span class="line">    %&gt;</span><br><span class="line">    &lt;form action=&quot;regist&quot; method=&quot;post&quot;&gt;</span><br><span class="line">        &lt;p&gt;&lt;label for=&quot;userName&quot;&gt;用户名:&lt;/label&gt;&lt;input type=&quot;text&quot; name=&quot;userName&quot; id=&quot;userName&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;label for=&quot;password&quot;&gt;密码:&lt;/label&gt;&lt;input type=&quot;password&quot; name=&quot;password&quot; id=&quot;password&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;label for=&quot;realName&quot;&gt;真是姓名:&lt;/label&gt;&lt;input type=&quot;text&quot; name=&quot;realName&quot; id=&quot;realName&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;label for=&quot;ID&quot;&gt;ID:&lt;/label&gt;&lt;input type=&quot;text&quot; name=&quot;ID&quot; id=&quot;ID&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;label for=&quot;birth&quot;&gt;出生日期:&lt;/label&gt;&lt;input type=&quot;text&quot; name=&quot;birth&quot; id=&quot;birth&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=&quot;reset&quot;  value=&quot;清空&quot;&gt;&lt;input type=&quot;submit&quot; value=&quot;注册&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css"></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">vanilla</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/03/03/%E6%B7%B1%E5%85%A5Servlet%E6%8A%80%E6%9C%AF/">http://example.com/2022/03/03/%E6%B7%B1%E5%85%A5Servlet%E6%8A%80%E6%9C%AF/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Vanilla's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JAVA-Web/">JAVA Web</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2022/03/03/XIW2SwyfT3PoBhR.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/03/04/%E8%93%9D%E6%A1%A52022/"><img class="prev-cover" src="https://s2.loli.net/2022/03/07/9w7EgWVvQOxrCJu.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">蓝桥2022</div></div></a></div><div class="next-post pull-right"><a href="/2022/03/03/HTTP%E5%8D%8F%E8%AE%AE/"><img class="next-cover" src="https://s2.loli.net/2022/03/03/mgu1tHzoKUrEbj2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">HTTP协议</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/03/11/Cookie%E4%B8%8ESession%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF/" title="Cookie与Session会话技术"><img class="cover" src="https://s2.loli.net/2022/03/11/17p86YAsZ5LcBVK.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-11</div><div class="title">Cookie与Session会话技术</div></div></a></div><div><a href="/2022/03/03/HTTP%E5%8D%8F%E8%AE%AE/" title="HTTP协议"><img class="cover" src="https://s2.loli.net/2022/03/03/mgu1tHzoKUrEbj2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-03</div><div class="title">HTTP协议</div></div></a></div><div><a href="/2022/03/16/JDBC%E7%9A%84%E5%BA%94%E7%94%A8/" title="JDBC的应用"><img class="cover" src="https://s2.loli.net/2022/03/19/CjpdzU26VGEJu3h.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-16</div><div class="title">JDBC的应用</div></div></a></div><div><a href="/2022/03/19/JSTL%E6%A0%87%E7%AD%BE%E5%BA%93/" title="JSTL标签库"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-19</div><div class="title">JSTL标签库</div></div></a></div><div><a href="/2022/03/01/Web%E5%BC%80%E5%8F%91%E6%A6%82%E8%BF%B0/" title="Web开发概述"><img class="cover" src="https://s2.loli.net/2022/03/02/K3kXbYPl6ZhHWos.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-01</div><div class="title">Web开发概述</div></div></a></div><div><a href="/2022/03/03/Web%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B03-3/" title="Web课堂笔记3.3"><img class="cover" src="https://s2.loli.net/2022/03/03/twaGUvxH53kjFLJ.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-03</div><div class="title">Web课堂笔记3.3</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">vanilla</div><div class="author-info__description"></div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">74</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Servlet%E7%9A%84%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">Servlet的概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFServlet"><span class="toc-number">1.1.</span> <span class="toc-text">什么是Servlet</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.2.</span> <span class="toc-text">Servlet的作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet%E7%9A%84%E7%89%88%E6%9C%AC"><span class="toc-number">1.3.</span> <span class="toc-text">Servlet的版本</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E7%AC%AC%E4%B8%80%E4%B8%AAServlet%EF%BC%883-0%E4%B9%8B%E5%89%8D%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">编写第一个Servlet（3.0之前）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%B1%BB%E7%BB%A7%E6%89%BFHttpServlet%EF%BC%883-0%E4%B9%8B%E5%89%8D%EF%BC%89"><span class="toc-number">2.1.</span> <span class="toc-text">创建一个类继承HttpServlet（3.0之前）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%86%99HttpServlet%E4%B8%AD%E7%9A%84doGet-%E3%80%81doPost"><span class="toc-number">2.2.</span> <span class="toc-text">复写HttpServlet中的doGet()、doPost()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEweb-xml%E6%96%87%E4%BB%B6"><span class="toc-number">2.3.</span> <span class="toc-text">配置web.xml文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-number">2.4.</span> <span class="toc-text">注意</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IDEA%E5%9C%A8Servlet3-0%E7%89%88%E6%9C%AC%E4%B8%8B%E5%88%9B%E5%BB%BAServlet%EF%BC%883-0%E4%B9%8B%E5%90%8E%EF%BC%8C%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">IDEA在Servlet3.0版本下创建Servlet（3.0之后，注解方式）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%EF%BC%9Anew%E9%87%8C%E9%9D%A2%E6%B2%A1%E6%9C%89Servlet"><span class="toc-number">3.0.1.</span> <span class="toc-text">问题：new里面没有Servlet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8E%E4%B9%8B%E5%89%8D%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.0.2.</span> <span class="toc-text">与之前创建方式的区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#HttpServletRequest%E7%AE%80%E4%BB%8B"><span class="toc-number">4.</span> <span class="toc-text">HttpServletRequest简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E8%A1%8C%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95"><span class="toc-number">4.1.</span> <span class="toc-text">获取请求行相关方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%A4%B4%E7%9A%84%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95"><span class="toc-number">4.2.</span> <span class="toc-text">获取请求头的相关方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">4.3.</span> <span class="toc-text">获取请求参数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#HttpServletResponse"><span class="toc-number">5.</span> <span class="toc-text">HttpServletResponse</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Responsed%E5%AF%B9%E8%B1%A1%E5%8F%91%E9%80%81%E5%93%8D%E5%BA%94%E8%A1%8C%E5%92%8C%E5%93%8D%E5%BA%94%E5%A4%B4"><span class="toc-number">5.1.</span> <span class="toc-text">Responsed对象发送响应行和响应头</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HttpServletResponse%E5%8F%91%E9%80%81%E5%93%8D%E5%BA%94%E4%BD%93"><span class="toc-number">5.2.</span> <span class="toc-text">HttpServletResponse发送响应体</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%BD%91%E7%AB%99%E7%99%BB%E5%BD%95%E4%B8%AD%E9%AA%8C%E8%AF%81%E7%A0%81%E7%9A%84%E5%88%87%E6%8D%A2%E5%8A%9F%E8%83%BD"><span class="toc-number">6.</span> <span class="toc-text">实现网站登录中验证码的切换功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#TIP"><span class="toc-number">6.1.</span> <span class="toc-text">TIP</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Servlet%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">7.</span> <span class="toc-text">Servlet的生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet%E6%8E%A5%E5%8F%A3"><span class="toc-number">7.1.</span> <span class="toc-text">Servlet接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HttpServlet%E6%8E%A5%E5%8F%A3%EF%BC%9Ajavax-servlet-http"><span class="toc-number">7.2.</span> <span class="toc-text">HttpServlet接口：javax.servlet.http</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">7.2.1.</span> <span class="toc-text">测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F-1"><span class="toc-number">7.2.2.</span> <span class="toc-text">注意</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ServletConfig%E5%AF%B9%E8%B1%A1"><span class="toc-number">8.</span> <span class="toc-text">ServletConfig对象</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">8.1.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84ServletConfig%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">8.2.</span> <span class="toc-text">常见的ServletConfig对象的方法：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95-1"><span class="toc-number">8.2.1.</span> <span class="toc-text">测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ServletContext-%E8%8E%B7%E5%8F%96%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%82%E6%95%B0"><span class="toc-number">9.</span> <span class="toc-text">ServletContext-获取项目初始化参数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ServletContext%E5%AE%9A%E4%B9%89"><span class="toc-number">9.1.</span> <span class="toc-text">ServletContext定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96ServletContext%E5%AF%B9%E8%B1%A1"><span class="toc-number">9.2.</span> <span class="toc-text">获取ServletContext对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%9F%E5%AF%B9%E8%B1%A1%EF%BC%88%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%B0%B1%E6%98%AF%E5%9C%A8%E4%B8%8D%E5%90%8C%E8%B5%84%E6%BA%90%E4%B9%8B%E5%89%8D%E6%9D%A5%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%EF%BC%8C%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%EF%BC%89"><span class="toc-number">9.3.</span> <span class="toc-text">域对象（域对象就是在不同资源之前来共享数据，保存数据，获取数据）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95-2"><span class="toc-number">9.3.1.</span> <span class="toc-text">测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%82%E6%95%B0"><span class="toc-number">9.3.1.1.</span> <span class="toc-text">获取所有初始化参数</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ServletContext%E5%AF%B9%E8%B1%A1-%E5%9C%A8%E5%A4%9A%E4%B8%AAServlet%E4%B9%8B%E9%97%B4%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">10.</span> <span class="toc-text">ServletContext对象-在多个Servlet之间共享数据</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ServletContext"><span class="toc-number">11.</span> <span class="toc-text">ServletContext</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="toc-number">12.</span> <span class="toc-text">请求转发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet%E4%B9%8B%E9%97%B4%E7%9A%84%E8%B7%B3%E8%BD%AC"><span class="toc-number">12.1.</span> <span class="toc-text">Servlet之间的跳转</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MVC"><span class="toc-number">12.2.</span> <span class="toc-text">MVC</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E7%82%B9%EF%BC%9A%E6%96%B9%E4%BE%BF%E7%BB%B4%E6%8A%A4%EF%BC%8C%E4%B8%80%E4%B8%AA%E6%94%B9%E5%8F%98%E5%85%B6%E4%BB%96%E4%B8%8D%E4%BC%9A%E6%9C%89%E5%BD%B1%E5%93%8D"><span class="toc-number">12.2.0.1.</span> <span class="toc-text">优点：方便维护，一个改变其他不会有影响</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AC%E5%8F%91Forward%E7%AE%80%E4%BB%8B%EF%BC%9A"><span class="toc-number">12.3.</span> <span class="toc-text">转发Forward简介：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TIP-1"><span class="toc-number">12.3.1.</span> <span class="toc-text">TIP:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E9%94%99%E8%AF%AF%E6%97%B6%E6%98%BE%E7%A4%BA%E9%94%99%E8%AF%AF%E7%95%8C%E9%9D%A2"><span class="toc-number">13.</span> <span class="toc-text">登录错误时显示错误界面</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91%E7%9A%84%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95"><span class="toc-number">13.1.</span> <span class="toc-text">请求转发的相关方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-number">13.1.1.</span> <span class="toc-text">问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95"><span class="toc-number">13.1.2.</span> <span class="toc-text">解决方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E7%94%A8ServletContext%E5%AF%B9%E8%B1%A1"><span class="toc-number">13.1.3.</span> <span class="toc-text">为什么不用ServletContext对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E5%8F%91%E8%BF%87%E7%A8%8B%E4%B8%AD%E6%90%BA%E5%B8%A6%E6%95%B0%E6%8D%AE"><span class="toc-number">13.1.4.</span> <span class="toc-text">转发过程中携带数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E4%BB%8B%E7%BB%8D"><span class="toc-number">14.</span> <span class="toc-text">重定向介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E7%9A%84%E7%AE%80%E4%BB%8B"><span class="toc-number">14.1.</span> <span class="toc-text">重定向的简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E9%87%8D%E5%AE%9A%E5%90%91%E7%9B%B8%E5%85%B3%E4%BB%A3%E7%A0%81"><span class="toc-number">14.2.</span> <span class="toc-text">请求重定向相关代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98-1"><span class="toc-number">14.2.1.</span> <span class="toc-text">问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%BA%E5%88%AB"><span class="toc-number">14.2.1.1.</span> <span class="toc-text">区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">14.2.1.2.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E5%92%8C%E8%BD%AC%E5%8F%91%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">15.</span> <span class="toc-text">重定向和转发的区别</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E9%A1%B5%E8%87%AA%E5%8A%A8%E5%88%B7%E6%96%B0"><span class="toc-number">16.</span> <span class="toc-text">网页自动刷新</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98%EF%BC%9A"><span class="toc-number">16.1.</span> <span class="toc-text">解决乱码问题：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Servlet%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8"><span class="toc-number">17.</span> <span class="toc-text">Servlet线程安全</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E7%9B%B8%E5%85%B3"><span class="toc-number">17.1.</span> <span class="toc-text">Servlet的线程安全相关</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95-1"><span class="toc-number">17.2.</span> <span class="toc-text">解决方法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-number">18.</span> <span class="toc-text">文件下载</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E6%96%87%E4%BB%B6%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%B5%81%E5%B0%86%E6%96%87%E4%BB%B6%E8%BF%94%E5%9B%9E%E7%BB%99%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B5%8F%E8%A7%88%E5%99%A8"><span class="toc-number">18.1.</span> <span class="toc-text">通过文件输入输出流将文件返回给客户端浏览器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E5%AF%B9%E5%BA%94%E7%9A%84http%E5%93%8D%E5%BA%94%E5%A4%B4%E9%80%9A%E7%9F%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8B%E8%BD%BD%E8%AF%A5%E6%96%87%E4%BB%B6"><span class="toc-number">18.2.</span> <span class="toc-text">通过对应的http响应头通知浏览器下载该文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B"><span class="toc-number">19.</span> <span class="toc-text">综合案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%99%BB%E5%BD%95%E9%A1%B5%E3%80%81%E6%B3%A8%E5%86%8C%E9%A1%B5"><span class="toc-number">19.0.1.</span> <span class="toc-text">创建登录页、注册页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B5"><span class="toc-number">19.0.2.</span> <span class="toc-text">主页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LoginServlet"><span class="toc-number">19.0.3.</span> <span class="toc-text">LoginServlet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%9E%E4%BD%93%E7%B1%BB%E6%9D%A5%E5%AD%98%E5%82%A8%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF"><span class="toc-number">19.0.4.</span> <span class="toc-text">创建一个实体类来存储用户信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RegistServlet"><span class="toc-number">19.0.5.</span> <span class="toc-text">RegistServlet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D"><span class="toc-number">19.0.6.</span> <span class="toc-text">会话</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#login-jsp"><span class="toc-number">19.0.7.</span> <span class="toc-text">login.jsp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#regist-jsp"><span class="toc-number">19.0.8.</span> <span class="toc-text">regist.jsp</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/05/10/web%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B05-10/" title="web课堂笔记5.10"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="web课堂笔记5.10"/></a><div class="content"><a class="title" href="/2022/05/10/web%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B05-10/" title="web课堂笔记5.10">web课堂笔记5.10</a><time datetime="2022-05-10T00:54:07.000Z" title="发表于 2022-05-10 08:54:07">2022-05-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/26/web%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B04-26/" title="web课堂笔记4.26"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="web课堂笔记4.26"/></a><div class="content"><a class="title" href="/2022/04/26/web%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B04-26/" title="web课堂笔记4.26">web课堂笔记4.26</a><time datetime="2022-04-26T00:13:58.000Z" title="发表于 2022-04-26 08:13:58">2022-04-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/24/4-24%E6%9C%BA%E5%99%A8/" title="4.24机器"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="4.24机器"/></a><div class="content"><a class="title" href="/2022/04/24/4-24%E6%9C%BA%E5%99%A8/" title="4.24机器">4.24机器</a><time datetime="2022-04-24T05:18:55.000Z" title="发表于 2022-04-24 13:18:55">2022-04-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/12/web%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B04-12/" title="web课堂笔记4.12"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="web课堂笔记4.12"/></a><div class="content"><a class="title" href="/2022/04/12/web%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B04-12/" title="web课堂笔记4.12">web课堂笔记4.12</a><time datetime="2022-04-12T00:16:40.000Z" title="发表于 2022-04-12 08:16:40">2022-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/11/%E5%A4%A9%E6%A2%AF-1/" title="天梯"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="天梯"/></a><div class="content"><a class="title" href="/2022/04/11/%E5%A4%A9%E6%A2%AF-1/" title="天梯">天梯</a><time datetime="2022-04-11T11:50:07.000Z" title="发表于 2022-04-11 19:50:07">2022-04-11</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By vanilla</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>